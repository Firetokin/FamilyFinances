{"remainingRequest":"E:\\other\\FamilyFinances\\node_modules\\babel-loader\\lib\\index.js!E:\\other\\FamilyFinances\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\other\\FamilyFinances\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\other\\FamilyFinances\\src\\components\\user\\UserLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\other\\FamilyFinances\\src\\components\\user\\UserLogin.vue","mtime":1597308936477},{"path":"E:\\other\\FamilyFinances\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596893530495},{"path":"E:\\other\\FamilyFinances\\node_modules\\babel-loader\\lib\\index.js","mtime":1596893529372},{"path":"E:\\other\\FamilyFinances\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596893530495},{"path":"E:\\other\\FamilyFinances\\node_modules\\vue-loader\\lib\\index.js","mtime":1596893556579}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      //这是登录表单的数据绑定对象\n      loginForm: {\n        userName: '',\n        password: ''\n      },\n      //这是表单的验证规则对象\n      loginFormRules: {\n        userName: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 50,\n          message: '长度在 3 到 50 个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 20,\n          message: '长度在 6 到 20 个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    //点击重置\n    resetLoginFrom: function resetLoginFrom() {\n      //console.log(this);\n      this.$refs.loginFormRef.resetFields();\n    },\n    //点击登录，预验证\n\n    /*userLogin(){\n    \t this.$router.push({path:'/userhome'})\n    \t\n    \tthis.$refs['LoginFormRef'].validate(async (valid) => {\n    \t    if (valid) {\n    \t        const {data:res} = await this.$http.post('login',this.loginForm)\n    \t        if (res.meta.status==200){\n    \t            this.$message({\n    \t\t\t\t\tmessage:'登录成功',\n    \t\t\t\t\ttype:'success'\n    \t              })\n    \t            window.sessionStorage.setItem('token',res.data.token)\n    \t            this.$router.push('/userhome')\n    \t        }else{\n    \t            this.$message({\n    \t                message:res.meta.msg,\n    \t                type:'error'\n    \t            })\n    \t        }\n    \t    } else {\n    \t            return false\n    \t        }\n    \t})\n    \t*/\n    userLogin: function userLogin() {\n      var that = this;\n      this.$axios({\n        method: \"post\",\n        url: '/family/UserController/login',\n        dataType: 'JSONP',\n        params: {\n          uname: this.loginForm.userName,\n          pwd: this.loginForm.password\n        }\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.data.code == 0) {\n          //提示信息\n          that.$message.success('登录成功'); //存储后台传回来的用户数据\n\n          localStorage.setItem('user', JSON.stringify(response.data.data));\n          console.log(JSON.parse(localStorage.getItem(\"user\"))); //跳转页面\n\n          that.$router.push('/userhome');\n        }\n      }).catch(function (error) {\n        that.$message.error('请输入账号和密码');\n        console.log('error submit!!');\n      });\n    }\n  }\n};",{"version":3,"sources":["UserLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA;AACA,MAAA,SAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAFA;AAMA;AACA,MAAA,cAAA,EAAA;AACA,QAAA,QAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,QAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,EAEA;AAAA,UAAA,GAAA,EAAA,CAAA;AAAA,UAAA,GAAA,EAAA,EAAA;AAAA,UAAA,OAAA,EAAA,gBAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAFA,CADA;AAKA,QAAA,QAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,OAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,EAEA;AAAA,UAAA,GAAA,EAAA,CAAA;AAAA,UAAA,GAAA,EAAA,EAAA;AAAA,UAAA,OAAA,EAAA,gBAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAFA;AALA;AAPA,KAAA;AAkBA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,cAFA,4BAEA;AACA;AACA,WAAA,KAAA,CAAA,YAAA,CAAA,WAAA;AACA,KALA;AAMA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,IAAA,SAhCA,uBAgCA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,MAAA,CAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,GAAA,EAAA,8BAFA;AAGA,QAAA,QAAA,EAAA,OAHA;AAIA,QAAA,MAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,SAAA,CAAA,QADA;AAEA,UAAA,GAAA,EAAA,KAAA,SAAA,CAAA;AAFA;AAJA,OAAA,EAQA,IARA,CAQA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA;AACA,UAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,EAFA,CAGA;;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA,EALA,CAMA;;AACA,UAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,WAAA;AACA;AACA,OAnBA,EAmBA,KAnBA,CAmBA,UAAA,KAAA,EAAA;AACA,QAAA,IAAA,CAAA,QAAA,CAAA,KAAA,CAAA,UAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,gBAAA;AACA,OAtBA;AAwBA;AA1DA;AArBA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"login_container\">\r\n\t\t<div class=\"login_box\">\r\n\t\t\t<div class=\"avater_box\">\r\n\t\t\t\t<!-- 头部logo -->\r\n\t\t\t\t<img src=\"../../assets/feimg/logo_login.png\" alt=\"\" class=\"avater_img\"/>\r\n\t\t\t</div>\r\n\t\t\t<!-- 登录表单区 -->\r\n\t\t\t<el-form ref=\"loginFormRef\" :model=\"loginForm\" :rules=\"loginFormRules\" label-width=\"0px\" class=\"form_login\">\r\n\t\t\t\t<!-- 用户名 -->\r\n\t\t\t\t<el-form-item prop=\"userName\">\r\n\t\t\t\t\t<el-input v-model=\"loginForm.userName\" prefix-icon=\"iconfont icon-yonghuguanli\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 密码 -->\r\n\t\t\t\t<el-form-item prop=\"password\">\r\n\t\t\t\t\t<el-input v-model=\"loginForm.password\" type=\"password\" prefix-icon=\"iconfont icon-suoping\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 按钮区域 -->\r\n\t\t\t\t<el-form-item class=\"btn_lr\">\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"userLogin\" plain style=\"margin-right: 50px;\">登录</el-button>\r\n\t\t\t\t\t<el-button type=\"info\" @click=\"resetLoginFrom\" plain>重置</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\t//这是登录表单的数据绑定对象\r\n\t\t\t\tloginForm:{\r\n\t\t\t\t\tuserName:'',\r\n\t\t\t\t\tpassword:''\r\n\t\t\t\t},\r\n\t\t\t\t//这是表单的验证规则对象\r\n\t\t\t\tloginFormRules:{\r\n\t\t\t\t\tuserName:[\r\n\t\t\t\t\t\t{ required: true, message: '请输入用户名', trigger: 'blur' },\r\n\t\t\t\t\t\t{ min: 3, max: 50, message: '长度在 3 到 50 个字符', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tpassword:[\r\n\t\t\t\t\t\t{ required: true, message: '请输入密码', trigger: 'blur' },\r\n\t\t\t\t\t\t{ min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t//点击重置\r\n\t\t\tresetLoginFrom(){\r\n\t\t\t\t//console.log(this);\r\n\t\t\t\tthis.$refs.loginFormRef.resetFields();\r\n\t\t\t},\r\n\t\t\t//点击登录，预验证\r\n\t\t\t/*userLogin(){\r\n\t\t\t\t this.$router.push({path:'/userhome'})\r\n\t\t\t\t\r\n\t\t\t\tthis.$refs['LoginFormRef'].validate(async (valid) => {\r\n\t\t\t\t    if (valid) {\r\n\t\t\t\t        const {data:res} = await this.$http.post('login',this.loginForm)\r\n\t\t\t\t        if (res.meta.status==200){\r\n\t\t\t\t            this.$message({\r\n\t\t\t\t\t\t\t\tmessage:'登录成功',\r\n\t\t\t\t\t\t\t\ttype:'success'\r\n\t\t\t\t              })\r\n\t\t\t\t            window.sessionStorage.setItem('token',res.data.token)\r\n\t\t\t\t            this.$router.push('/userhome')\r\n\t\t\t\t        }else{\r\n\t\t\t\t            this.$message({\r\n\t\t\t\t                message:res.meta.msg,\r\n\t\t\t\t                type:'error'\r\n\t\t\t\t            })\r\n\t\t\t\t        }\r\n\t\t\t\t    } else {\r\n\t\t\t\t            return false\r\n\t\t\t\t        }\r\n\t\t\t\t})\r\n\t\t\t\t*/\r\n\t\t\t   \r\n\t\t\t   userLogin(){\r\n\t\t\t   \tconst that = this \r\n\t\t\t   \tthis.$axios({\r\n\t\t\t   \t\tmethod:\"post\",\r\n\t\t\t   \t\turl:'/family/UserController/login',\r\n\t\t\t   \t\tdataType:'JSONP',\r\n\t\t\t   \t\tparams:{\r\n\t\t\t   \t\t\tuname:this.loginForm.userName,\r\n\t\t\t   \t\t\tpwd:this.loginForm.password\r\n\t\t\t   \t\t}\r\n\t\t\t   \t}).then(function (response) {\r\n\t\t\t   \t\tconsole.log(response);\r\n\t\t\t   \t\tif(response.data.code == 0){\r\n\t\t\t\t\t\t//提示信息\r\n\t\t\t   \t\t\tthat.$message.success('登录成功');\r\n\t\t\t\t\t\t//存储后台传回来的用户数据\r\n\t\t\t   \t\t\tlocalStorage.setItem('user', JSON.stringify(response.data.data));\r\n\t\t\t\t\t\tconsole.log(JSON.parse(localStorage.getItem(\"user\")));\r\n\t\t\t\t\t\t//跳转页面\r\n\t\t\t   \t\t\tthat.$router.push('/userhome');\t\r\n\t\t\t   \t\t}\r\n\t\t\t   \t}).catch(function (error) {\r\n\t\t\t   \t\tthat.$message.error('请输入账号和密码');\r\n\t\t\t   \t\tconsole.log('error submit!!');\r\n\t\t\t   \t});\r\n\t\t\t   \r\n\t\t\t   }\r\n\t\t\t\r\n\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.login_container{\r\n\t\tbackground-color: #F4F5EE;\r\n\t\tbackground-image: url(\"https://www.transparenttextures.com/patterns/dust.png\");\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\tbackground-size: 100% 100%;\r\n\t\tposition: fixed;\r\n\t}\r\n\t.login_box{\r\n\t\twidth: 400px;\r\n\t\theight: 300px;\r\n\t\tbackground-color: aliceblue;\r\n\t\tborder-radius: 10px;\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttop: 230px;\r\n\t\ttransform: translate(-50%,-10%);\r\n\t}\r\n\t.avater_box{\r\n\t\theight: 120px;\r\n\t\twidth: 120px;\r\n\t\tborder: 4px solid #eee;\r\n\t\tborder-radius: 50%;\r\n\t\tpadding: 10px;\r\n\t\tbox-shadow: 0 0 10px #ddd;\r\n\t\tposition: absolute;\r\n\t\tleft:50%;\r\n\t\ttransform: translate(-50%,-50%);\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\t/*头部logo自适应div大小*/\r\n\t.avater_img{\r\n\t\tmax-width: 100%;\r\n\t\tmax-height: 100%;\r\n\t} \t\r\n\t\r\n\t.btn_lr{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.form_login{\r\n\t\tposition: absolute;\r\n\t\tbottom: 0px;\r\n\t\twidth: 100%;\r\n\t\tpadding: 0 50px;\r\n\t\tbox-sizing: border-box; /*不设置是默认的，框会超出表单*/\r\n\t}\r\n</style>\r\n"],"sourceRoot":"src/components/user"}]}